(function(a){'use strict';function b(a,b,c,d){a.beginPath(),a.arc(b,c,d,0,B,!1),a.fill()}function g(a,b,c,d,e){a.beginPath(),a.moveTo(b,c),a.lineTo(d,e),a.stroke()}function c(a,d,e,f,g,h,i,j){var k=A(d*B),c=z(d*B);j-=i,b(a,e-c*g,f+k*h+0.5*j,i+(1-0.5*k)*j)}function e(a,b,d,e,f,g,h,j){var k;for(k=5;k--;)c(a,b+k/5,d,e,f,g,h,j)}function d(f,g,h,i,j,k,l){g/=3e4;var m=0.21*j,a=0.12*j,b=0.24*j,c=0.28*j;f.fillStyle=l,e(f,g,h,i,m,a,b,c),f.globalCompositeOperation='destination-out',e(f,g,h,i,m,a,b-k,c-k),f.globalCompositeOperation='source-over'}function f(a,d,e,f,h,j,k){d/=1.2e5;var l,i,m,n,o=0.32*h+0.5*j,b=0.5*h-0.5*j;for(a.strokeStyle=k,a.lineWidth=j,a.lineCap='round',a.lineJoin='round',a.beginPath(),a.arc(e,f,0.25*h-0.5*j,0,B,!1),a.stroke(),l=8;l--;)i=(d+l/8)*B,m=A(i),n=z(i),g(a,e+m*o,f+n*o,e+m*b,f+n*b)}function i(b,d,e,f,g,h,i){d/=15000;var j=0.29*g-0.5*h,a=A(d*B),c=a*B/-16;b.strokeStyle=i,b.lineWidth=h,b.lineCap='round',b.lineJoin='round',e+=a*(0.05*g),b.beginPath(),b.arc(e,f,j,c+B/8,c+7*B/8,!1),b.arc(e+A(c)*j*w,f+z(c)*j*w,j,c+5*B/8,c+3*B/8,!0),b.closePath(),b.stroke()}function j(a,b,c,d,e,f,g){b/=1350;var h,i,j,k;for(a.fillStyle=g,h=4;h--;)i=(b+h/4)%1,j=c+(h-1.5)/1.5*(1===h||2===h?-1:1)*(0.16*e),k=d+i*i*e,a.beginPath(),a.moveTo(j,k-1.5*f),a.arc(j,k,0.75*f,11*B/12,7*B/12,!1),a.fill()}function k(a,b,c,d,e,f,h){b/=750;var j,i,k,l;for(a.strokeStyle=h,a.lineWidth=0.5*f,a.lineCap='round',a.lineJoin='round',j=4;j--;)i=(b+j/4)%1,k=r(c+(j-1.5)/1.5*(1===j||2===j?-1:1)*(0.1875*e))+0.5,l=d+i*e,g(a,k,l-1.5*f,k,l+1.5*f)}function l(a,c,d,e,f,h,j){c/=3e3;var k,i,l,m,n=0.75*h,b=0.7*(c*B),o=A(b)*n,p=z(b)*n,q=b+B/3,r=A(q)*n,s=z(q)*n,t=b+2*B/3,u=A(t)*n,v=z(t)*n;for(a.strokeStyle=j,a.lineWidth=0.5*h,a.lineCap='round',a.lineJoin='round',k=4;k--;)i=(c+k/4)%1,l=d+z((i+k/4)*B)*(0.16*f),m=e+i*f,g(a,l-o,m-p,l+o,m+p),g(a,l-r,m-s,l+r,m+s),g(a,l-u,m-v,l+u,m+v)}function m(f,g,h,i,j,k,l){g/=3e4;var m=0.21*j,a=0.06*j,b=0.21*j,c=0.28*j;f.fillStyle=l,e(f,g,h,i,m,a,b,c),f.globalCompositeOperation='destination-out',e(f,g,h,i,m,a,b-k,c-k),f.globalCompositeOperation='source-over'}function h(g,h,i,j,k,l,m){var n=k/8,a=n/3,b=2*a,c=h%1*B,d=A(c),e=z(c);g.fillStyle=m,g.strokeStyle=m,g.lineWidth=l,g.lineCap='round',g.lineJoin='round',g.beginPath(),g.arc(i,j,n,c,c+u,!1),g.arc(i-a*d,j-a*e,b,c+u,c,!1),g.arc(i+b*d,j+b*e,a,c+u,c,!0),g.globalCompositeOperation='destination-out',g.fill(),g.globalCompositeOperation='source-over',g.stroke()}function n(g,j,k,l,m,n,o,p,q){j/=2500;var s,b,d,f,i=x[o],t=(j+o-y[o].start)%p,a=(j+o-y[o].end)%p,c=(j+o)%p;if(g.strokeStyle=q,g.lineWidth=n,g.lineCap='round',g.lineJoin='round',1>t){if(g.beginPath(),t*=i.length/2-1,s=r(t),t-=s,s*=2,s+=2,g.moveTo(k+(i[s-2]*(1-t)+i[s]*t)*m,l+(i[s-1]*(1-t)+i[s+1]*t)*m),1>a){for(a*=i.length/2-1,b=r(a),a-=b,b*=2,b+=2,f=s;f!==b;f+=2)g.lineTo(k+i[f]*m,l+i[f+1]*m);g.lineTo(k+(i[b-2]*(1-a)+i[b]*a)*m,l+(i[b-1]*(1-a)+i[b+1]*a)*m)}else for(f=s;f!==i.length;f+=2)g.lineTo(k+i[f]*m,l+i[f+1]*m);g.stroke()}else if(1>a){for(g.beginPath(),a*=i.length/2-1,b=r(a),a-=b,b*=2,b+=2,g.moveTo(k+i[0]*m,l+i[1]*m),f=2;f!==b;f+=2)g.lineTo(k+i[f]*m,l+i[f+1]*m);g.lineTo(k+(i[b-2]*(1-a)+i[b]*a)*m,l+(i[b-1]*(1-a)+i[b+1]*a)*m),g.stroke()}1>c&&(c*=i.length/2-1,d=r(c),c-=d,d*=2,d+=2,h(g,j,k+(i[d-2]*(1-c)+i[d]*c)*m,l+(i[d-1]*(1-c)+i[d+1]*c)*m,m,n,q))}var o,p,q=Math.min,r=Math.floor,z=Math.sin,A=Math.cos,u=Math.PI;(function(){var b=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.oCancelAnimationFrame||a.msCancelAnimationFrame;b&&c?(o=function(a){function c(){d.value=b(c),a()}var d={value:null};return c(),d},p=function(a){c(a.value)}):(o=setInterval,p=clearInterval)})();var s=500,v=0.08,B=2*u,w=2/1.4142135623730951,x=[[-0.75,-0.18,-0.7219,-0.1527,-0.6971,-0.1225,-0.6739,-0.091,-0.6516,-0.0588,-0.6298,-0.0262,-0.6083,0.0065,-0.5868,0.0396,-0.5643,0.0731,-0.5372,0.1041,-0.5033,0.1259,-0.4662,0.1406,-0.4275,0.1493,-0.3881,0.153,-0.3487,0.1526,-0.3095,0.1488,-0.2708,0.1421,-0.2319,0.1342,-0.1943,0.1217,-0.16,0.1025,-0.129,0.0785,-0.1012,0.0509,-0.0764,0.0206,-0.0547,-0.012,-0.0378,-0.0472,-0.0324,-0.0857,-0.0389,-0.1241,-0.0546,-0.1599,-0.0814,-0.1876,-0.1193,-0.1964,-0.1582,-0.1935,-0.1931,-0.1769,-0.2157,-0.1453,-0.229,-0.1085,-0.2327,-0.0697,-0.224,-0.0317,-0.2064,0.0033,-0.1853,0.0362,-0.1613,0.0672,-0.135,0.0961,-0.1051,0.1213,-0.0706,0.1397,-0.0332,0.1512,0.0053,0.158,0.0442,0.1624,0.0833,0.1636,0.1224,0.1615,0.1613,0.1565,0.1999,0.15,0.2378,0.1402,0.2749,0.1279,0.3118,0.1147,0.3487,0.1015,0.3858,0.0892,0.4236,0.0787,0.4621,0.0715,0.5012,0.0702,0.5398,0.0766,0.5768,0.089,0.6123,0.1055,0.6466,0.1244,0.6805,0.144,0.7147,0.163,0.75,0.18],[-0.75,0,-0.7033,0.0195,-0.6569,0.0399,-0.6104,0.06,-0.5634,0.0789,-0.5155,0.0954,-0.4667,0.1089,-0.4174,0.1206,-0.3676,0.1299,-0.3174,0.1365,-0.2669,0.1398,-0.2162,0.1391,-0.1658,0.1347,-0.1157,0.1271,-0.0661,0.1169,-0.017,0.1046,0.0316,0.0903,0.0791,0.0728,0.1259,0.0534,0.1723,0.0331,0.2188,0.0129,0.2656,-0.0064,0.3122,-0.0263,0.3586,-0.0466,0.4052,-0.0665,0.4525,-0.0847,0.5007,-0.1002,0.5497,-0.113,0.5991,-0.124,0.6491,-0.1325,0.6994,-0.138,0.75,-0.14]],y=[{start:0.36,end:0.11},{start:0.56,end:0.16}],t=function(a){this.list=[],this.interval=null,this.color=a&&a.color?a.color:'black',this.resizeClear=!!(a&&a.resizeClear)};t.CLEAR_DAY=function(a,b,c){var d=a.canvas.width,e=a.canvas.height,g=q(d,e);f(a,b,0.5*d,0.5*e,g,g*v,c)},t.CLEAR_NIGHT=function(a,b,c){var d=a.canvas.width,e=a.canvas.height,f=q(d,e);i(a,b,0.5*d,0.5*e,f,f*v,c)},t.PARTLY_CLOUDY_DAY=function(a,b,c){var e=a.canvas.width,g=a.canvas.height,h=q(e,g);f(a,b,0.625*e,0.375*g,0.75*h,h*v,c),d(a,b,0.375*e,0.625*g,0.75*h,h*v,c)},t.PARTLY_CLOUDY_NIGHT=function(a,b,c){var e=a.canvas.width,f=a.canvas.height,g=q(e,f);i(a,b,0.667*e,0.375*f,0.75*g,g*v,c),d(a,b,0.375*e,0.625*f,0.75*g,g*v,c)},t.CLOUDY=function(a,b,c){var e=a.canvas.width,f=a.canvas.height,g=q(e,f);d(a,b,0.5*e,0.5*f,g,g*v,c)},t.RAIN=function(a,b,c){var e=a.canvas.width,f=a.canvas.height,g=q(e,f);j(a,b,0.5*e,0.37*f,0.9*g,g*v,c),d(a,b,0.5*e,0.37*f,0.9*g,g*v,c)},t.SLEET=function(a,b,c){var e=a.canvas.width,f=a.canvas.height,g=q(e,f);k(a,b,0.5*e,0.37*f,0.9*g,g*v,c),d(a,b,0.5*e,0.37*f,0.9*g,g*v,c)},t.SNOW=function(a,b,c){var e=a.canvas.width,f=a.canvas.height,g=q(e,f);l(a,b,0.5*e,0.37*f,0.9*g,g*v,c),d(a,b,0.5*e,0.37*f,0.9*g,g*v,c)},t.WIND=function(a,b,c){var d=a.canvas.width,e=a.canvas.height,f=q(d,e);n(a,b,0.5*d,0.5*e,f,f*v,0,2,c),n(a,b,0.5*d,0.5*e,f,f*v,1,2,c)},t.FOG=function(i,j,l){var o=i.canvas.width,p=i.canvas.height,h=q(o,p),s=h*v;m(i,j,0.5*o,0.32*p,0.75*h,s,l),j/=5e3;var k=0.02*(A(j*B)*h),a=0.02*(A((j+0.25)*B)*h),b=0.02*(A((j+0.5)*B)*h),c=0.02*(A((j+0.75)*B)*h),d=0.936*p,n=r(d-0.5*s)+0.5,e=r(d-2.5*s)+0.5;i.strokeStyle=l,i.lineWidth=s,i.lineCap='round',i.lineJoin='round',g(i,k+0.2*o+0.5*s,n,a+0.8*o-0.5*s,n),g(i,b+0.2*o+0.5*s,e,c+0.8*o-0.5*s,e)},t.prototype={_determineDrawingFunction:function(a){if('string'==typeof a)return a=a.toUpperCase().replace(/-/g,'_'),t.hasOwnProperty(a)?t[a]:null},add:function(a,b){var c;('string'==typeof a&&(a=document.getElementById(a)),null!==a)&&(b=this._determineDrawingFunction(b),'function'!=typeof b||(c={element:a,context:a.getContext('2d'),drawing:b},this.list.push(c),this.draw(c,s)))},set:function(a,b){var c;for('string'==typeof a&&(a=document.getElementById(a)),c=this.list.length;c--;)if(this.list[c].element===a)return this.list[c].drawing=this._determineDrawingFunction(b),void this.draw(this.list[c],s);this.add(a,b)},remove:function(a){var b;for('string'==typeof a&&(a=document.getElementById(a)),b=this.list.length;b--;)if(this.list[b].element===a)return void this.list.splice(b,1)},draw:function(a,b){var c=a.context.canvas;this.resizeClear?c.width=c.width:a.context.clearRect(0,0,c.width,c.height),a.drawing(a.context,b,this.color)},play:function(){var a=this;this.pause(),this.interval=o(function(){var b,c=Date.now();for(b=a.list.length;b--;)a.draw(a.list[b],c)},1e3/60)},pause:function(){this.interval&&(p(this.interval),this.interval=null)}},a.Skycons=t})(this);